// Code generated by xorm reverse.
// 同步表结构到数据库
package dbmodel

import "fmt"
import "xorm.io/xorm"

// InitSync 更新表结构到单库，用于测试和开发环境
// 快速同步表结构，以及dbdiff出表结构改动
func InitSync(orm *xorm.Engine) error {
	var err error

	err = sync(orm, &AccountUser{})
	if err != nil {
		fmt.Print(fmt.Errorf("sync &AccountUser error:%v", err))
	}

	err = sync(orm, &Friends{})
	if err != nil {
		fmt.Print(fmt.Errorf("sync &Friends error:%v", err))
	}

	return nil
}

// GetShardInfo 获取所有表的分区数量，大于1的都认为要分区
func GetShardInfo() map[string]DbTableInterface {
	info := make(map[string]DbTableInterface)

	info["account_user"] = new(AccountUser)

	info["friends"] = new(Friends)

	return info
}

func sync(orm *xorm.Engine, table DbTableInterface) error {
	return orm.Sync2(table)
}
